{"ast":null,"code":"import SignUp from './components/SignUp.vue';\nimport Home from './components/Home.vue';\nimport Login from './components/Login.vue';\nimport AdminDashboard from './components/AdminDashboard.vue';\nimport ManagerDashboard from './components/ManagerDashboard.vue';\nimport UserDashboard from './components/UserDashboard.vue';\nimport SearchCategory from './components/SearchCategory.vue';\nimport SearchProduct from './components/SearchProduct.vue';\nimport Bookings from './components/Bookings.vue';\nimport Summary from './components/Summary.vue';\nimport store from './vuex';\nimport VueRouter from 'vue-router';\nconst routes = [{\n  name: 'SignUp',\n  component: SignUp,\n  path: '/signup',\n  meta: {\n    requiresGuest: true\n  }\n}, {\n  name: 'Home',\n  component: Home,\n  path: '/'\n}, {\n  name: 'Login',\n  component: Login,\n  path: '/login',\n  meta: {\n    requiresGuest: true\n  }\n}, {\n  name: 'AdminDashboard',\n  component: AdminDashboard,\n  path: '/admin/dashboard',\n  meta: {\n    requiresAuth: true,\n    requiresRole: 'Admin'\n  }\n}, {\n  name: 'UserDashboard',\n  component: UserDashboard,\n  path: '/user/dashboard',\n  meta: {\n    requiresAuth: true,\n    requiresRole: 'User'\n  }\n}, {\n  name: 'SearchCategory',\n  component: SearchCategory,\n  path: '/search/categories',\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  name: 'SearchProduct',\n  component: SearchProduct,\n  path: '/search/products',\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  name: 'Bookings',\n  component: Bookings,\n  path: '/bookings',\n  meta: {\n    requiresAuth: true,\n    requiresRole: 'User'\n  }\n}, {\n  name: 'Summary',\n  component: Summary,\n  path: '/summary',\n  meta: {\n    requiresAuth: true,\n    requiresRole: 'Admin'\n  }\n}, {\n  name: 'ManagerDashboard',\n  component: ManagerDashboard,\n  path: '/manager/dashboard',\n  meta: {\n    requiresAuth: true,\n    requiresRole: 'Manager'\n  }\n}];\nconst router = new VueRouter({\n  routes\n});\nrouter.beforeEach(async (to, from, next) => {\n  const isAuthenticated = store.state.isAuthenticated;\n  const requiresAuth = to.meta.requiresAuth;\n  const requiresGuest = to.meta.requiresGuest;\n  const role = store.state.userRole;\n  const requiredRole = to.meta.requiresRole;\n  if (requiresAuth && !isAuthenticated || requiresGuest && isAuthenticated) {\n    next('/');\n  } else {\n    const accessToken = store.state.access_token;\n    const expiryTime = store.state.expiryTime;\n    if (requiresAuth && accessToken && expiryTime) {\n      store.commit('setAuthentication', {\n        isAuthenticated: true\n      });\n      store.commit('setToken', {\n        access_token: accessToken\n      });\n      store.commit('setExpiryTime', {\n        expiryTime: expiryTime\n      });\n      if (requiredRole) {\n        if (role !== requiredRole) {\n          // Show popup or notification indicating unauthorized access\n          store.commit('setNotification', {\n            variant: 'error',\n            message: 'You are not authorized to access this page.'\n          });\n          setTimeout(() => {\n            store.commit('clearNotification');\n          }, 3000);\n          next('/');\n        } else {\n          next();\n        }\n      } else {\n        next();\n      }\n    } else {\n      next();\n    }\n  }\n});\nexport default router;","map":{"version":3,"names":["SignUp","Home","Login","AdminDashboard","ManagerDashboard","UserDashboard","SearchCategory","SearchProduct","Bookings","Summary","store","VueRouter","routes","name","component","path","meta","requiresGuest","requiresAuth","requiresRole","router","beforeEach","to","from","next","isAuthenticated","state","role","userRole","requiredRole","accessToken","access_token","expiryTime","commit","variant","message","setTimeout"],"sources":["C:/Users/Dell/OneDrive/Documents/Project Root Folder/appdev/src/routers.js"],"sourcesContent":["import SignUp from './components/SignUp.vue'\r\nimport Home from './components/Home.vue'\r\nimport Login from './components/Login.vue'\r\nimport AdminDashboard from './components/AdminDashboard.vue'\r\nimport ManagerDashboard from './components/ManagerDashboard.vue'\r\nimport UserDashboard from './components/UserDashboard.vue'\r\nimport SearchCategory from './components/SearchCategory.vue'\r\nimport SearchProduct from './components/SearchProduct.vue'\r\nimport Bookings from './components/Bookings.vue'\r\nimport Summary from './components/Summary.vue'\r\nimport store from './vuex';\r\nimport VueRouter from 'vue-router'\r\n\r\nconst routes = [\r\n    {\r\n        name : 'SignUp',\r\n        component : SignUp,\r\n        path : '/signup',\r\n        meta: { \r\n            requiresGuest: true \r\n        }\r\n    },\r\n    {\r\n        name : 'Home',\r\n        component : Home,\r\n        path : '/'\r\n    },\r\n    {\r\n        name : 'Login',\r\n        component : Login,\r\n        path : '/login',\r\n        meta: { \r\n            requiresGuest: true \r\n        }\r\n    },\r\n    {\r\n        name : 'AdminDashboard',\r\n        component : AdminDashboard,\r\n        path : '/admin/dashboard',\r\n        meta: {\r\n            requiresAuth: true,\r\n            requiresRole: 'Admin'\r\n        }\r\n    },\r\n    {\r\n      name : 'UserDashboard',\r\n      component : UserDashboard,\r\n      path : '/user/dashboard',\r\n      meta: {\r\n        requiresAuth: true,\r\n        requiresRole: 'User'\r\n      }\r\n    },\r\n    {\r\n      name : 'SearchCategory',\r\n      component : SearchCategory,\r\n      path : '/search/categories',\r\n      meta: {\r\n        requiresAuth: true\r\n      }\r\n    },\r\n    {\r\n      name : 'SearchProduct',\r\n      component : SearchProduct,\r\n      path : '/search/products',\r\n      meta: {\r\n        requiresAuth: true\r\n      }\r\n    },\r\n    {\r\n      name : 'Bookings',\r\n      component : Bookings,\r\n      path : '/bookings',\r\n      meta: {\r\n        requiresAuth: true,\r\n        requiresRole: 'User'\r\n      }\r\n    },\r\n    {\r\n      name : 'Summary',\r\n      component : Summary,\r\n      path : '/summary',\r\n      meta : {\r\n        requiresAuth : true,\r\n        requiresRole : 'Admin'\r\n      }\r\n    },\r\n    {\r\n      name : 'ManagerDashboard',\r\n      component : ManagerDashboard,\r\n      path : '/manager/dashboard',\r\n      meta: {\r\n          requiresAuth: true,\r\n          requiresRole: 'Manager'\r\n      }\r\n  }\r\n];\r\n\r\nconst router = new VueRouter({\r\n    routes\r\n})\r\n\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n    const isAuthenticated = store.state.isAuthenticated;\r\n    const requiresAuth = to.meta.requiresAuth;\r\n    const requiresGuest = to.meta.requiresGuest;\r\n    const role = store.state.userRole;\r\n    const requiredRole = to.meta.requiresRole;\r\n\r\n    if ((requiresAuth && !isAuthenticated) || (requiresGuest && isAuthenticated)) {\r\n      next('/');\r\n    } else {\r\n      const accessToken = store.state.access_token;\r\n      const expiryTime = store.state.expiryTime;\r\n  \r\n      if (requiresAuth && accessToken && expiryTime) {\r\n        \r\n          store.commit('setAuthentication', { isAuthenticated: true });\r\n          store.commit('setToken', { access_token: accessToken });\r\n          store.commit('setExpiryTime', { expiryTime : expiryTime })\r\n\r\n          if(requiredRole)\r\n          {\r\n            if(role !== requiredRole){\r\n              // Show popup or notification indicating unauthorized access\r\n              store.commit('setNotification', {\r\n                variant: 'error',\r\n                message: 'You are not authorized to access this page.'\r\n              });\r\n              setTimeout(() => {\r\n                store.commit('clearNotification');\r\n              }, 3000);\r\n              next('/');\r\n            }\r\n            else{\r\n              next();\r\n            }\r\n          }\r\n          else{\r\n            next();\r\n          }\r\n        } else {\r\n        next();\r\n      }\r\n    }\r\n  });\r\n\r\nexport default router;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}